#!/usr/bin/env python3

import os
from flash_tool import FlashTool 

flash_tool = FlashTool()

files_to_send = [
    "./code.py",
    "./boot.py",
    "./utils.py",
    "./constants.py",
    "./modules",
    "./controllers",
    # "./lib",
]

excluded_files = [
    "__pycache__",
    ".DS_Store",
]

def send_file_list(files_list, prev_path = ""):
    for path_dir in files_list:
        current_path = os.path.join(prev_path, path_dir)
        if path_dir not in excluded_files and current_path not in excluded_files:
            if os.path.isdir(current_path):
                send_file_list(os.listdir(current_path), current_path)
            else:
                flash_tool.send_file(current_path)

# flash_tool.clean()
send_file_list(files_to_send)
flash_tool.reboot()
